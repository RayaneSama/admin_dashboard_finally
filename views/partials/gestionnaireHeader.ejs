<header class="navbar navbar-dark sticky-top flex-md-nowrap p-0 shadow">

  <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6" href="/compteGestionnaire/<%= userId %>">Gestionnaire</a>

  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse"
    data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <form class="col-8 col-md-5 col-lg-4 d-flex justify-content-center mb-2 mb-md-0" role="search" method="POST"
    action="/recherche/<%= userId %>">

    <div class="search-container">
      <input type="search" name="searchTerm" class="form-control form-control-dark border-0"
        placeholder="Faire une Recherche ..." aria-label="Search" style="width: 500px;">
      <i class="bi bi-search search-icon" style="color: rgb(10, 37, 212);"></i>
    </div>
  </form>

  <div class="dropdown text-end" style="margin-right: 20px;">
    <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser1"
      data-bs-toggle="dropdown" aria-expanded="false">
      <img src="/images/<%= results[0].photo_profil %>" alt="" width="32" height="32" class="rounded-circle">

    </a>
    <ul class="dropdown-menu text-small dropdown-menu-end" aria-labelledby="dropdownUser1">
      <li><a class="dropdown-item" href="/monprofile/<%= userId %>"> <i class="bi bi-person"></i> Mon profile </a>
      </li>
      <li class="dropdown-item">
        <div class="form-check form-switch" style=" margin-left: auto;">
          <input class="form-check-input" type="checkbox" role="switch" id="darkModeToggle">
          <label class="form-check-label" for="darkModeToggle"> Mode sombre </label>
        </div>
      </li>
      <li>
        <hr class="dropdown-divider">
      </li>
      <li><a class="dropdown-item" href="/login" id="logoutLink" data-bs-toggle="modal"
          data-bs-target="#logoutConfirmationModal"> <i class="bi bi-box-arrow-left m pb-2" style="color: #fe0800;"></i>
          Se
          d√©connecter </a></li>

    </ul>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Retrieve the dark mode toggle checkbox element
    const darkModeToggle = document.getElementById('darkModeToggle');

    // Function to toggle dark mode
    function toggleDarkMode() {
      // Toggle the 'dark-mode' class on the body element
      document.body.classList.toggle('dark-mode');

      // Save dark mode preference to localStorage
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    }

    // Load dark mode preference from localStorage and apply if set
    const isDarkMode = localStorage.getItem('darkMode') === 'true';
    if (isDarkMode) {
      document.body.classList.add('dark-mode');
      darkModeToggle.checked = true;
    }

    // Listen for click event on dark mode toggle checkbox
    darkModeToggle.addEventListener('change', toggleDarkMode);
  });

</script>